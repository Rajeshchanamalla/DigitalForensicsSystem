<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Upload Evidence - Digital Forensics</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <nav class="navbar">
    <div class="nav-container">
      <h3>ðŸ”’ Digital Forensic System</h3>
      <div class="nav-links">
        <a href="investigator-dashboard.html">Dashboard</a>
        <a href="#" onclick="logout()">Logout</a>
      </div>
    </div>
  </nav>

  <div class="container">
    <div class="page-header">
      <h1>ðŸ“¤ Upload Digital Evidence</h1>
      <p class="subtitle">Upload evidence files and store their hash securely</p>
    </div>

    <div class="upload-form">
      <div class="form-group">
        <label for="caseId">Case ID *</label>
        <input type="text" id="caseId" placeholder="Enter case ID (e.g., CASE-2024-001)" required>
        <small>Unique identifier for the forensic case</small>
      </div>

      <div class="form-group">
        <label for="fileInput">Select Evidence File *</label>
        <input type="file" id="fileInput" accept="*/*" required>
        <small>Select the digital evidence file to upload</small>
      </div>

      <div id="fileInfo" class="file-info" style="display: none;">
        <p><strong>File Name:</strong> <span id="fileName"></span></p>
        <p><strong>File Size:</strong> <span id="fileSize"></span></p>
      </div>

      <button onclick="uploadEvidence()" class="btn-primary btn-large">
        ðŸ”’ Upload & Store Evidence
      </button>

      <div id="uploadStatus"></div>

      <div class="results-section">
        <h3>Upload Results</h3>
        
        <div class="result-item">
          <label>SHA-256 Hash:</label>
          <div id="hashOutput" class="hash-display"></div>
        </div>

        <div class="result-item">
          <label>IPFS CID:</label>
          <div id="ipfsOutput" class="hash-display"></div>
        </div>

        <div class="result-item">
          <label>Transaction Hash:</label>
          <div id="txOutput" class="hash-display"></div>
        </div>
      </div>
    </div>
  </div>

  <script src="config.js"></script>
  <script src="app.js"></script>
  <script>
    // Display file info when file is selected
    document.getElementById('fileInput').addEventListener('change', function(e) {
      const file = e.target.files[0];
      if (file) {
        document.getElementById('fileInfo').style.display = 'block';
        document.getElementById('fileName').textContent = file.name;
        document.getElementById('fileSize').textContent = formatFileSize(file.size);
      }
    });

    function formatFileSize(bytes) {
      if (bytes === 0) return '0 Bytes';
      const k = 1024;
      const sizes = ['Bytes', 'KB', 'MB', 'GB'];
      const i = Math.floor(Math.log(bytes) / Math.log(k));
      return Math.round(bytes / Math.pow(k, i) * 100) / 100 + ' ' + sizes[i];
    }
  </script>
</body>
</html>
